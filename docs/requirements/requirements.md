# 動画からマニュアル自動生成サービス 要件定義書

## 1. サービス概要
ユーザーがSaaS画面などの操作動画をアップロードすると、自動で画像付きマニュアルページ（Markdown形式）を生成するWebアプリケーション

## 2. 目的とスコープ
### 目的
- 操作動画から自動的に手順書を生成し、マニュアル作成の工数を削減
- MOC（Minimum Operational Capability）として基本機能を実装

### スコープ
- **含む**: 動画アップロード、動画解析、マニュアル生成、表示機能
- **含まない**: ユーザー認証、課金機能、マルチテナント対応

## 3. 機能要件

### 3.1 動画アップロード機能
- 対応形式: MP4, MOV, AVI, WebM
- 最大ファイルサイズ: 500MB
- 最大動画長: 10分
- アップロード進捗表示
- ドラッグ&ドロップ対応

### 3.2 動画解析・処理機能
- Gemini APIを使用した動画内容の解析
- 操作手順の自動抽出
- 重要な操作シーンの特定（Gemini APIのプロンプトで制御）
- スクリーンショット取得秒数の指定（Gemini APIが判断）

### 3.3 スクリーンショット抽出機能
- Cloudinary APIを使用
- 重要な操作ポイントでのスクリーンショット自動取得
- 画像の最適化処理

### 3.4 マニュアル生成機能
- Markdown形式での出力
- 手順番号の自動付与
- スクリーンショット画像の埋め込み
- 操作説明文の自動生成
- 説明の詳細度選択（簡潔/詳細）
- 多言語対応（日本語/英語）

### 3.5 マニュアル表示機能
- 生成されたマニュアルのプレビュー表示
- Markdownのレンダリング
- 画像の適切な表示
- ダウンロード機能（Markdown形式）

## 4. 非機能要件

### 4.1 パフォーマンス
- 動画アップロード: 100Mbpsで5分以内
- マニュアル生成: 5分の動画で3分以内
- ページロード: 3秒以内

### 4.2 使いやすさ
- 直感的なUI
- 3クリック以内でマニュアル生成完了
- レスポンシブデザイン対応
- ライトモードデザイン
- 緑と水色の中間色をアクセントカラーに使用

### 4.3 信頼性
- エラーハンドリング実装
- 処理状況の可視化
- エラー時は処理中断（再試行なし）
- エラーメッセージを画面に表示
- タイムアウト時も画面に表示

## 5. 技術要件

### 5.1 フロントエンド
- モダンで洗練されたシンプルなUI
- SPA（Single Page Application）構造
- リアルタイム進捗表示

### 5.2 バックエンド
- RESTful API設計
- 非同期処理対応
- エラーハンドリング

### 5.3 外部サービス連携
- **Supabase Storage**: 画像ファイルの一時保管
- **Gemini API**: 動画解析
- **Cloudinary API**: スクリーンショット取得

## 6. ユーザー操作フロー

1. **トップページアクセス**
   - サービス説明表示
   - 動画アップロードエリア表示

2. **動画アップロード**
   - ドラッグ&ドロップまたはファイル選択
   - アップロード進捗表示

3. **マニュアル作成開始**
   - 「マニュアル作成」ボタン押下
   - 処理状況表示（プログレスバー）

4. **処理実行**
   - 動画解析
   - スクリーンショット抽出
   - マニュアル生成

5. **結果表示**
   - 生成されたマニュアルの表示
   - ダウンロードボタン表示

## 7. 画面構成

### 7.1 メイン画面
- ヘッダー: サービス名、簡単な説明
- メインエリア: 動画アップロードゾーン
- オプション選択: 詳細度（簡潔/詳細）、言語（日本語/英語）
- フッター: 使い方ガイドリンク

### 7.2 処理中画面
- プログレスバー
- 処理ステータス表示
- キャンセルボタン

### 7.3 結果表示画面
- マニュアルプレビューエリア
- ダウンロードボタン
- 新規作成ボタン

## 8. データフロー

```
1. 動画アップロード → Supabase Storage（一時保存）
2. Cloudinary API → スクリーンショット抽出
3. 抽出画像 → Supabase Storage保存
4. Gemini API → 動画解析・テキスト生成
5. マニュアル生成 → Markdown形式で統合
6. 結果表示 → ユーザーに表示
```

## 9. 制約事項

- 同時処理数: 1ユーザー1処理まで
- 動画保存期間: 処理完了後即削除
- 画像保存期間: 1時間後自動削除
- API利用制限: 各サービスの無料枠内（必要に応じて課金）
- Supabase Storage: Privateバケット設定（技術的に可能な場合）

## 10. 今後の拡張可能性

- ユーザー認証機能
- 履歴管理機能
- マニュアルテンプレート機能
- 多言語対応
- PDFエクスポート機能
- 共同編集機能